{% extends "base.html" %}
{% load staticfiles %}
{% load widget_tweaks %}
{% load humanize %}
{% block content %}
<input type="hidden" id="project" value="{{ project.id }}">
<!-- start page title -->
<div class="row">
    <div class="col-12">
        <div class="page-title-box">
            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">BOX OS</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'app:home' %}">Projects</a></li>
                    <li class="breadcrumb-item active">{{project.title}}</li>
                </ol>
            </div>
            <h4 class="page-title">Project Details</h4>
        </div>
    </div>
</div>
<!-- end page title -->

<div class="row">
    <div class="col-md-8">
        {% if project.status == "Draft" %}
        <div class="alert alert-secondary" role="alert">
            <p class="alert-heading"><i class="fa fa-info-circle"></i> Draft</p>
            <p>This project is in "Draft" mode. If this is only for testing purposes, please leave it in draft. If it's a real project, update status to "Active" here: <a class="edit-doc text-primary" style="cursor:pointer" data-id="{{ project.id }}" data-name="project" data-title="Edit Project">Update Status</a></p>
        </div>
        {% endif %}
        <!-- project card -->
        <div class="card d-block">
            <div class="card-body">
                <div class="dropdown card-widgets">
                    {% if permission %}
                    <a href="javascript:void(0);" class="dropdown-toggle arrow-none" data-toggle="dropdown" aria-expanded="false">
                        <i class="dripicons-dots-3"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" x-placement="bottom-end" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-142px, 20px, 0px);">
                        <!-- item-->
                        <button
                          class="dropdown-item edit-doc"
                          data-id="{{ project.id }}"
                          data-name="project"
                          data-title="Edit Project"
                          >
                            <i class="mdi mdi-pencil mr-1"></i>Edit
                        </button>
                        <!-- item-->
                        <a href=""
                          data-toggle="modal"
                          data-target="#invite"
                          data-id="{{ project.id }}"
                          class="invite dropdown-item"><i class="mdi mdi-email-outline mr-1"></i>Invite</a>
                        <!-- item-->
                        <a href=""
                                id="leave-project"
                                data-toggle="modal"
                                data-target="#leave"
                                data-id="{{ project.id }}"
                                class="dropdown-item"><i class="mdi mdi-exit-to-app mr-1"></i>Leave</a>
                    </div>
                    {% endif %}
                </div>
                <!-- project title-->
                <h3 class="mt-0">
                    {{project.title}}
                </h3>
                {% if project.status == "Active" %}
                <div class="badge badge-success mb-3">{{project.status}}</div>
                {% elif project.status == "Archived" %}
                <div class="badge badge-secondary mb-3">{{project.status}}</div>
                {% elif project.status == "Killed" %}
                <div class="badge badge-danger mb-3">{{project.status}}</div>
                {% else %}
                <div class="badge badge-secondary mb-3">{{project.status}}</div>
                {% endif %}
                <div class="badge badge-primary mb-3">{{project.stage}}</div>

                <h5>Project Description:</h5>
                {% if project.description %}
                <p class="text-muted mb-2">
                    {{project.description|linebreaks}}
                </p>
                {% else %}
                <p class="text-muted mb-2">
                    You haven't added a description for your project yet.
                </p>
                {% endif %}

                <div class="row">
                    <div class="col-md-4">
                        <div class="mb-4">
                            <h5>Created Date</h5>
                            <p>{{project.created_at|date}} <small class="text-muted">1:00 PM</small></p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-4">
                            <h5>Updated Date</h5>
                            <p>{{project.updated_at|date}} <small class="text-muted">1:00 PM</small></p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <!--<div class="mb-4">
                            <h5>Budget</h5>
                            <p>$15,800</p>
                        </div>-->
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <h5>Team Members:</h5>
                        {% for member in team %}
                        {{member.user.logentry}}
                        <a href="javascript:void(0);" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{member.user.first_name}} {{member.user.last_name}}" class="d-inline-block">
                            {% for profile in member.user.profile_set.all %}
                            <img src="{{profile.profile_image.url}}" class="rounded-circle img-thumbnail avatar-sm" alt="friend">
                            {% endfor %}
                        </a>
                        {% endfor %}
                    </div>
                    <div class="col-auto">
                        {% if viewers %}
                        <h5>Viewers:</h5>
                        {% for member in viewers %}
                        {{member.user.logentry}}
                        <a href="javascript:void(0);" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{member.user.first_name}} {{member.user.last_name}}" class="d-inline-block">
                            {% for profile in member.user.profile_set.all %}
                            <img src="{{profile.profile_image.url}}" class="rounded-circle img-thumbnail avatar-sm" alt="friend">
                            {% endfor %}
                        </a>
                        {% endfor %}
                        {% endif %}
                    </div>
                </div>

            </div> <!-- end card-body-->

        </div> <!-- end card-->


        <div class="card">
            <div class="card-body">
                <div class="card-widgets">
                    <a href="javascript:;" data-toggle="reload"><i class="mdi mdi-refresh"></i></a>
                    <a data-toggle="collapse" href="#cardCollpase4" role="button" aria-expanded="false" aria-controls="cardCollpase1"><i class="mdi mdi-minus"></i></a>
                    <a href="#" data-toggle="remove"><i class="mdi mdi-close"></i></a>
                </div>
                <h4 class="header-title">
                    Elevator Pitch
                    <a href="" class="text-muted" data-toggle="modal" data-target="#elevator">
                        <i class="mdi mdi-information-outline" data-toggle="tooltip" data-placement="top" title="" data-original-title="Learn More"></i>
                    </a>
                </h4>
                <p class="text-muted font-14 mb-2">
                    Add your elevator pitch in this section. Need help? <a href="" data-toggle="modal" data-target="#elevator">Learn more</a>.
                </p>

                <div class="table-responsive collapse show" id="cardCollpase4" style="max-height:125px; overflow-y: auto;">
                    <table class="table table-top mb-0">
                        <tbody>
                            {% if not elevators %}
                            <p><i class="text-muted fa fa-exclamation-triangle"></i> No data available</p>
                            {% endif %}
                            {% for elevator in elevators %}
                            <tr class="text-justify">
                                <td>
                                    {{elevator.text | linebreaks}}
                                    <small class="text-muted">{{elevator.updated_at|date}}</small>
                                </td>
                                {% if permission %}
                                <td class="table-action">
                                    <a href="javascript: void(0);"
                                        data-name="elevator"
                                        data-id={{elevator.id}}
                                        class="action-icon remove float-right"> <i class="mdi mdi-delete"></i></a>
                                    <a
                                      href="javascript: void(0);"
                                      data-id="{{ elevator.id }}"
                                      data-name="elevator"
                                      data-title="Elevator pitch"
                                      class="action-icon edit-doc float-right">
                                        <i class="mdi mdi-pencil"></i>
                                    </a>
                                </td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
            {% if permission %}
            <div class="card-footer text-muted">
                <button type="button"
                        class="btn btn-outline-primary btn-sm float-right call-dynamic-form"
                        data-toggle="modal"
                        data-name="elevator"
                        data-title="Elevator pitch"
                        data-target="#bs-example-modal-lg">Add New</button>
            </div>
            {% endif %}
        </div>
        <div class="card">
            <div class="card-body">
                <div class="card-widgets">
                    <a href="javascript:;" data-toggle="reload"><i class="mdi mdi-refresh"></i></a>
                    <a data-toggle="collapse" href="#cardCollpase1" role="button" aria-expanded="false" aria-controls="cardCollpase1"><i class="mdi mdi-minus"></i></a>
                    <a href="#" data-toggle="remove"><i class="mdi mdi-close"></i></a>
                </div>
                <h4 class="header-title">
                    Problem
                    <a href="" class="text-muted" data-toggle="modal" data-target="#problem">
                        <i class="mdi mdi-information-outline" data-toggle="tooltip" data-placement="top" title="" data-original-title="Learn More"></i>
                    </a>
                </h4>
                <p class="text-muted font-14 mb-2">
                    Add your problem statement in this section and keep track of the hypothesis results. Need help? <a href="" data-toggle="modal" data-target="#problem">Learn more</a>.
                </p>

                <div class="table-responsive collapse show" id="cardCollpase1" style="max-height:125px; overflow-y: auto;">
                    <table class="table table-top mb-0">
                        <tbody>
                            {% if not problems %}
                            <p><i class="text-muted fa fa-exclamation-triangle"></i> No data available</p>
                            {% endif %}
                            {% for problem in problems %}
                            <tr class="text-justify">
                                <td>
                                    {{problem.text | linebreaks}}
                                    <small class="text-muted">{{problem.updated_at|date}}</small>
                                </td>
                                <td>
                                    {% if problem.status == "Validated" %}
                                    <span class="badge badge-success float-right">{{problem.status}}</span>
                                    {% elif problem.status == "In Progress" %}
                                    <span class="badge badge-warning float-right" style="color:white">{{problem.status}}</span>
                                    {% else %}
                                    <span class="badge badge-danger float-right">{{problem.status}}</span>
                                    {% endif %}
                                </td>
                                {% if permission %}
                                <td class="table-action">
                                    <a href="javascript: void(0);"
                                        data-name="problem"
                                        data-id={{problem.id}}
                                        class="action-icon remove float-right"> <i class="mdi mdi-delete"></i></a>
                                    <a
                                      href="javascript: void(0);"
                                      data-id="{{ problem.id }}"
                                      data-name="problem"
                                      data-title="Problem"
                                      class="action-icon edit-doc float-right">
                                        <i class="mdi mdi-pencil"></i>
                                    </a>
                                </td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
            {% if permission %}
            <div class="card-footer text-muted">
                <button type="button"
                        class="btn btn-outline-primary btn-sm float-right call-dynamic-form"
                        data-name="problem"
                        data-title="Problem"
                        data-toggle="modal"
                        data-target="#bs-example-modal-lg">Add New</button>
            </div>
            {% endif %}
        </div>


        <div class="card">
            <div class="card-body">
                <div class="card-widgets">
                    <a href="javascript:;" data-toggle="reload"><i class="mdi mdi-refresh"></i></a>
                    <a data-toggle="collapse" href="#cardCollpase2" role="button" aria-expanded="false" aria-controls="cardCollpase1"><i class="mdi mdi-minus"></i></a>
                    <a href="#" data-toggle="remove"><i class="mdi mdi-close"></i></a>
                </div>
                <h4 class="header-title">
                    Solution
                    <a href="" class="text-muted" data-toggle="modal" data-target="#solution">
                        <i class="mdi mdi-information-outline" data-toggle="tooltip" data-placement="top" title="" data-original-title="Learn More"></i>
                    </a>
                </h4>
                <p class="text-muted font-14 mb-2">
                    Add your solution statement in this section and keep track of the hypothesis results. Need help? <a href="" data-toggle="modal" data-target="#solution">Learn more</a>.
                </p>

                <div class="table-responsive collapse show" id="cardCollpase2" style="max-height:125px; overflow-y: auto;">
                    <table class="table table-top mb-0">
                        <tbody>
                            {% if not solutions %}
                            <p><i class="text-muted fa fa-exclamation-triangle"></i> No data available</p>
                            {% endif %}
                            {% for solution in solutions %}
                            <tr class="text-justify">
                                <td>
                                    {{solution.text | linebreaks}}
                                    <small class="text-muted">{{solution.updated_at|date}}</small>
                                </td>
                                <td>
                                    {% if solution.status == "Validated" %}
                                    <span class="badge badge-success float-right">{{solution.status}}</span>
                                    {% elif solution.status == "In Progress" %}
                                    <span class="badge badge-warning float-right" style="color:white">{{solution.status}}</span>
                                    {% else %}
                                    <span class="badge badge-danger float-right">{{solution.status}}</span>
                                    {% endif %}
                                </td>
                                {% if permission %}
                                <td class="table-action">
                                    <a href="javascript: void(0);"
                                        data-name="solution"
                                        data-id={{solution.id}}
                                        class="action-icon remove float-right"> <i class="mdi mdi-delete"></i></a>
                                    <a
                                      href="javascript: void(0);"
                                      data-id="{{ solution.id }}"
                                      data-name="solution"
                                      data-title="Solution"
                                      class="action-icon edit-doc float-right">
                                        <i class="mdi mdi-pencil"></i>
                                    </a>
                                </td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
            {% if permission %}
            <div class="card-footer text-muted">
                <button
                        type="button"
                        data-name="solution"
                        data-title="Solution"
                        data-toggle="modal"
                        data-target="#bs-example-modal-lg"
                        class="btn btn-outline-primary btn-sm float-right call-dynamic-form">Add New</button>
            </div>
            {% endif %}
        </div>

        <div class="card">
            <div class="card-body">
                <div class="card-widgets">
                    <a href="javascript:;" data-toggle="reload"><i class="mdi mdi-refresh"></i></a>
                    <a data-toggle="collapse" href="#cardCollpase3" role="button" aria-expanded="false" aria-controls="cardCollpase3"><i class="mdi mdi-minus"></i></a>
                    <a href="#" data-toggle="remove"><i class="mdi mdi-close"></i></a>
                </div>
                <h4 class="header-title">
                    Business Model
                    <a href="" class="text-muted" data-toggle="modal" data-target="#businessmodel">
                        <i class="mdi mdi-information-outline" data-toggle="tooltip" data-placement="top" title="" data-original-title="Learn More"></i>
                    </a>
                </h4>
                <p class="text-muted font-14 mb-2">
                    Add your business model statement in this section and keep track of the hypothesis results. Need help? <a href="" data-toggle="modal" data-target="#businessmodel">Learn more</a>.
                </p>

                <div class="table-responsive collapse show" id="cardCollpase3" style="max-height:125px; overflow-y: auto;">
                    <table class="table table-top mb-0">
                        <tbody>
                            {% if not models %}
                            <p><i class="text-muted fa fa-exclamation-triangle"></i> No data available</p>
                            {% endif %}
                            {% for model in models %}
                            <tr class="text-justify">
                                <td>
                                    {{model.text | linebreaks}}
                                    <small class="text-muted">{{model.updated_at|date}}</small>
                                </td>
                                <td>
                                    {% if model.status == "Validated" %}
                                    <span class="badge badge-success float-right">{{model.status}}</span>
                                    {% elif model.status == "In Progress" %}
                                    <span class="badge badge-warning float-right" style="color:white">{{model.status}}</span>
                                    {% else %}
                                    <span class="badge badge-danger float-right">{{model.status}}</span>
                                    {% endif %}
                                </td>
                                {% if permission %}
                                <td class="table-action">
                                    <a href="javascript: void(0);"
                                        data-name="business_model"
                                        data-id={{model.id}}
                                        class="action-icon remove float-right"> <i class="mdi mdi-delete"></i></a>
                                    <a
                                      href="javascript: void(0);"
                                      data-id="{{ model.id }}"
                                      data-name="business_model"
                                      data-title="Business model"
                                      class="action-icon edit-doc float-right">
                                        <i class="mdi mdi-pencil"></i>
                                    </a>
                                </td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
            {% if permission %}
            <div class="card-footer text-muted">
                <button
                        type="button"
                        data-name="business_model"
                        data-title="Business model"
                        data-toggle="modal"
                        data-target="#bs-example-modal-lg"
                        class="btn btn-outline-primary btn-sm float-right call-dynamic-form">Add New</button>
            </div>
            {% endif %}
        </div>
        <div class="card">
            <div class="card-body">
                <h4 class="mt-0 mb-3">Comments ({{project.comment_set.count }})</h4>
                    <form id="comment-form" method="POST">
                        <input type="hidden" name="project" value="{{ project.id }}" />
                        {% csrf_token %}
                        <textarea
                            class="form-control form-control-light mb-2"
                            id="example-textarea"
                            rows="3"
                            name="text"
                            placeholder="Write message..."
                            ></textarea>
                        <div class="text-right">
                            <!--<div class="btn-group mb-2">
                                <button type="button" class="btn btn-link btn-sm text-muted font-18"><i class="dripicons-paperclip"></i></button>
                            </div>-->
                            <div class="btn-group mb-2 ml-2">
                                <button type="button" class="btn btn-primary btn-sm submit">Submit</button>
                            </div>
                        </div>
                    </form>
                    {% for comment in comments %}

                    <div class="media mt-2">
                        {% for profile in comment.user.profile_set.all %}
                        <img class="mr-3 avatar-sm rounded-circle" src="{{profile.profile_image.url}}" alt="Generic placeholder image">
                        {% endfor %}
                        <div class="media-body">
                            <h5 class="mt-0">{{comment.user.first_name}} {{comment.user.last_name}}<small> {{comment.created_at|date}}</small></h5>
                            {{comment.text}}
                        </div>
                    </div>

                    {% endfor %}
            </div> <!-- end card-body-->
        </div>
        <!-- end card-->
    </div> <!-- end col -->

    <div class="col-md-4">
        {% if project.stage == 'Seed 1' or project.stage == 'Seed 2' or project.stage == 'Seed 3' %}
        <div class="card">
            <div class="card-body">
                    <h4 class="header-title">
                        <a href="{% url 'app:seed' project.slug %}">Seed I to III</a>
                        <a href="" class="text-muted" data-toggle="modal" data-target="#seed">
                            <i class="mdi mdi-information-outline" data-toggle="tooltip" data-placement="top" title="" data-original-title="Learn More"></i>
                        </a>
                    </h4>
                <div class="timeline-alt pb-0">
                    <div class="timeline-item">
                        {% if dvf_seed.0.desirability == "On Track" %}
                        <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.desirability}}"></i>
                        {% elif dvf_seed.0.desirability == "Delayed" %}
                        <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.desirability}}"></i>
                        {% elif dvf_seed.0.desirability == "At Risk" %}
                        <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.desirability}}"></i>
                        {% else %}
                        <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                        {% endif %}
                        <div class="timeline-item-info">
                            <a href="#" class="mb-1 d-block" style="color:#6c757d">Desirabilty</a>
                            <p></p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        {% if dvf_seed.0.viability == "On Track" %}
                        <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.viability}}"></i>
                        {% elif dvf_seed.0.viability == "Delayed" %}
                        <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.viability}}"></i>
                        {% elif dvf_seed.0.viability == "At Risk" %}
                        <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.viability}}"></i>
                        {% else %}
                        <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                        {% endif %}
                        <div class="timeline-item-info">
                            <a href="#" class="mb-1 d-block" style="color:#6c757d">Viability</a>
                            <p></p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        {% if dvf_seed.0.feasibility == "On Track" %}
                        <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.feasibility}}"></i>
                        {% elif dvf_seed.0.feasibility == "Delayed" %}
                        <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.feasibility}}"></i>
                        {% elif dvf_seed.0.feasibility == "At Risk" %}
                        <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seed.0.feasibility}}"></i>
                        {% else %}
                        <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                        {% endif %}
                        <div class="timeline-item-info">
                            <a href="#" class="mb-1 d-block" style="color:#6c757d">Feasibility</a>
                            <p>
                                {% if dvf_seed.0.created_at %}
                                <small class="text-muted">Since: {{dvf_seed.0.created_at|date}}</small>
                                {% else %}
                                <small class="text-muted">NA</small>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            </div> <!-- end card-body-->
            <div class="card-footer text-muted">
                <a class="btn btn-primary float-right" href="{% url 'app:seed' project.slug %}">Status Update</a>
            </div>
        </div>
        {% elif project.stage == 'Seed Launch' %}
        <div class="card">
            <div class="card-body">
                <a href="{% url 'app:seed-launch' project.slug %}"><h4 class="header-title">Seed Launch</h4></a>
                <div class="timeline-alt pb-0">
                    <div class="timeline-item">
                        {% if dvf_seedlaunch.0.desirability == "On Track" %}
                        <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.desirability}}"></i>
                        {% elif dvf_seedlaunch.0.desirability == "Delayed" %}
                        <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.desirability}}"></i>
                        {% elif dvf_seedlaunch.0.desirability == "At Risk" %}
                        <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.desirability}}"></i>
                        {% else %}
                        <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                        {% endif %}
                        <div class="timeline-item-info">
                            <a href="#" class="mb-1 d-block" style="color:#6c757d">Desirabilty</a>
                            <p></p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        {% if dvf_seedlaunch.0.viability == "On Track" %}
                        <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.viability}}"></i>
                        {% elif dvf_seedlaunch.0.viability == "Delayed" %}
                        <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.viability}}"></i>
                        {% elif dvf_seedlaunch.0.viability == "At Risk" %}
                        <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.viability}}"></i>
                        {% else %}
                        <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                        {% endif %}
                        <div class="timeline-item-info">
                            <a href="#" class="mb-1 d-block" style="color:#6c757d">Viability</a>
                            <p></p>
                        </div>
                    </div>

                    <div class="timeline-item">
                        {% if dvf_seedlaunch.0.feasibility == "On Track" %}
                        <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.feasibility}}"></i>
                        {% elif dvf_seedlaunch.0.feasibility == "Delayed" %}
                        <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.feasibility}}"></i>
                        {% elif dvf_seedlaunch.0.feasibility == "At Risk" %}
                        <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_seedlaunch.0.feasibility}}"></i>
                        {% else %}
                        <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                        {% endif %}
                        <div class="timeline-item-info">
                            <a href="#" class="mb-1 d-block" style="color:#6c757d">Feasibility</a>
                            <p>
                                {% if dvf_seedlaunch.0.created_at %}
                                <small class="text-muted">Since: {{dvf_seedlaunch.0.created_at|date}}</small>
                                {% else %}
                                <small class="text-muted">NA</small>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            </div> <!-- end card-body-->
            <div class="card-footer text-muted">
                <div class="btn-group float-right">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Status Update</button>
                    <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 37px, 0px);">
                        <a class="dropdown-item" href="{% url 'app:seed' project.slug %}">Seed I to III</a>
                        <a class="dropdown-item" href="{% url 'app:seed-launch' project.slug %}">Seed Launch</a>
                    </div>
                </div>
            </div>
        </div>
        {% elif project.stage == 'Launch' %}
        <div class="card">
          <div class="card-body">
              <a href="{% url 'app:launch' project.slug %}"><h4 class="header-title">Launch</h4></a>
              <div class="timeline-alt pb-0">
                  <div class="timeline-item">
                      {% if dvf_launch.0.desirability == "On Track" %}
                      <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.desirability}}"></i>
                      {% elif dvf_launch.0.desirability == "Delayed" %}
                      <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.desirability}}"></i>
                      {% elif dvf_launch.0.desirability == "At Risk" %}
                      <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.desirability}}"></i>
                      {% else %}
                      <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                      {% endif %}
                      <div class="timeline-item-info">
                          <a href="#" class="mb-1 d-block" style="color:#6c757d">Desirabilty</a>
                          <p></p>
                      </div>
                  </div>

                  <div class="timeline-item">
                      {% if dvf_launch.0.viability == "On Track" %}
                      <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.viability}}"></i>
                      {% elif dvf_launch.0.viability == "Delayed" %}
                      <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.viability}}"></i>
                      {% elif dvf_launch.0.viability == "At Risk" %}
                      <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.viability}}"></i>
                      {% else %}
                      <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                      {% endif %}
                      <div class="timeline-item-info">
                          <a href="#" class="mb-1 d-block" style="color:#6c757d">Viability</a>
                          <p></p>
                      </div>
                  </div>

                  <div class="timeline-item">
                      {% if dvf_launch.0.feasibility == "On Track" %}
                      <i class="bg-success-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.feasibility}}"></i>
                      {% elif dvf_launch.0.feasibility == "Delayed" %}
                      <i class="bg-warning-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.feasibility}}"></i>
                      {% elif dvf_launch.0.feasibility == "At Risk" %}
                      <i class="bg-danger-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="{{dvf_launch.0.feasibility}}"></i>
                      {% else %}
                      <i class="bg-secondary-lighten text-info timeline-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="No data"></i>
                      {% endif %}
                      <div class="timeline-item-info">
                          <a href="#" class="mb-1 d-block" style="color:#6c757d">Feasibility</a>
                          <p>
                              {% if dvf_launch.0.updated_at %}
                              <small class="text-muted">{{dvf_launch.0.updated_at|date}}</small>
                              {% else %}
                              <small class="text-muted">NA</small>
                              {% endif %}
                          </p>
                      </div>
                  </div>
              </div>
          </div> <!-- end card-body-->
          <div class="card-footer text-muted">
                <div class="btn-group float-right">
                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Status Update</button>
                    <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 37px, 0px);">
                        <a class="dropdown-item" href="{% url 'app:seed' project.slug %}">Seed I to III</a>
                        <a class="dropdown-item" href="{% url 'app:seed-launch' project.slug %}">Seed Launch</a>
                        <a class="dropdown-item" href="{% url 'app:launch' project.slug %}">Launch</a>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="card">
            <div class="card-body">
                <h5 class="card-title mb-3">Stage
                    <a href="" class="text-muted" data-toggle="modal" data-target="#seed">
                        <i class="mdi mdi-information-outline" data-toggle="tooltip" data-placement="top" title="" data-original-title="Learn More"></i>
                    </a>
                </h5>
                <p><i class="text-muted fa fa-exclamation-triangle"></i> To access this section the project's stage has to be Seed I to III, Seed Launch, or Launch.
                {% if permission %}
                <a
                  style="cursor:pointer"
                  class="edit-doc text-primary"
                  data-id="{{ project.id }}"
                  data-name="project"
                  data-title="Edit Project"
                  >Click to edit
                </a>
                {% endif %}
                </p>
            </div>
        </div>
        {% endif %}
        <div class="card">
            <div class="card-body">
                <div class="dropdown card-widgets">
                    {% if permission %}
                    <a href="javascript:void(0);" class="dropdown-toggle arrow-none" data-toggle="dropdown" aria-expanded="false">
                        <i class="dripicons-dots-3"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" x-placement="bottom-end" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-142px, 20px, 0px);">
                        <a
                          href="javascript: void(0);"
                          data-name="link"
                          data-title="External Link"
                          class="dropdown-item call-dynamic-form">
                            <i class="mdi mdi-plus-circle mr-1"></i>Add
                        </a>

                    </div>
                    {% endif %}
                </div>
                <h5 class="card-title mb-3">External Links</h5>
                {% if not links %}
                <p><i class="text-muted fa fa-exclamation-triangle"></i> No links available</p>
                {% endif %}
                {% for link in links %}
                <div class="card mb-1 shadow-none border-light">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <i class="fa fa-link" style="font-size:15px"></i>
                        </div>
                        <div class="col pl-0">
                            <a href="{{link.link}}" class="text-dark font-weight-bold">{{link.title|truncatechars:25}}</a>
                        </div>
                        <div class="col-auto">

                            <a href="{{link.link}}" target="_blank" class="btn btn-link btn-md text-info">
                                <i class="fa fa-external-link-alt"></i>
                            </a>
                                <span aria-hidden="true"
                                    class="remove"
                                    data-name="link"
                                    data-id={{link.id}}>×</span>
                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="dropdown card-widgets">
                    {% if permission %}
                    <a href="javascript:void(0);" class="dropdown-toggle arrow-none" data-toggle="dropdown" aria-expanded="false">
                        <i class="dripicons-dots-3"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" x-placement="bottom-end" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(-142px, 20px, 0px);">
                        <a href="javascript:void(0);" data-toggle="modal"
                          data-target="#file-modal" class="dropdown-item add-file">
                          <i class="mdi mdi-plus-circle mr-1"></i>
                          Add
                        </a>
                    </div>
                    {% endif %}
                </div>
                <h5 class="card-title mb-3">Files</h5>
                {% if not files %}
                <p><i class="text-muted fa fa-exclamation-triangle"></i> No files available</p>
                {% endif %}
                {% for file in files %}
                <div class="card mb-1 shadow-none border border-light">
                    <div class="p-2">
                        <div class="row align-items-center">
                            <div class="col-auto">
                                <i class="mdi mdi-file" style="font-size:20px"></i>
                            </div>
                            <div class="col pl-0">
                                <a href="{{file.file.url}}" target="_blank" class="text-muted font-weight-bold">{{file.title|truncatechars:25}}</a>
                                <p class="mb-0"></p>
                            </div>
                            <div class="col-auto">

                                <a href="/media/{{file.file}}" target="_blank" class="btn btn-link btn-lg text-info">
                                    <i class="dripicons-download"></i>
                                </a>
                                <span aria-hidden="true"
                                    class="remove"
                                    data-name="file"
                                    data-id={{file.id}}>×</span>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h4 class="header-title mb-2">Recent Activity</h4>
                <div class="slimscroll" style="max-height: 300px;">
                    <div class="timeline-alt pb-0">
                        {% for log in logs %}
                            {% if log.extra.project_id == project.id or log.extra.project_slug == project.slug %}
                            <div class="timeline-item">
                                <i class="mdi mdi-upload bg-info-lighten text-info timeline-icon"></i>
                                <div class="timeline-item-info">
                                    <p class="text-info font-weight-bold mb-1 d-block">{{log.extra.event|capfirst}}</p>
                                    <small>{{log.user.first_name}} {{log.user.last_name}} {{log.extra.event}}</small>
                                    <p>
                                        <small class="text-muted">{{log.timestamp|naturalday|capfirst}}</small>
                                    </p>
                                </div>
                            </div>
                            {% endif %}
                        {% endfor %}


                        <!--<div class="timeline-item">
                            <i class="mdi mdi-upload bg-primary-lighten text-primary timeline-icon"></i>
                            <div class="timeline-item-info">
                                <a href="#" class="text-primary font-weight-bold mb-1 d-block">Audrey Tobey</a>
                                <small>Uploaded a photo
                                    <span class="font-weight-bold">"Error.jpg"</span>
                                </small>
                                <p>
                                    <small class="text-muted">14 hours ago</small>
                                </p>
                            </div>
                        </div>-->
                    </div>
                    <!-- end timeline -->
                </div> <!-- end slimscroll -->
            </div>
            <!-- end card-body -->
        </div>
        <!-- end card-->
    </div>
</div>
<!-- end row -->


<div
  class="modal fade"
  id="file-modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="filemodal"
  aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <form class="modal-content" action="/api/file" method="post" enctype="multipart/form-data">
            <div class="modal-header">
                <h4 class="modal-title">Add a file</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                {% csrf_token %}
                <input type="hidden" name="project" value="{{ project.id }}" />

                {% if error %}
                <div class="alert alert-danger">
                  {{ error }}
                </div>
                {% endif %}
                {% for field in fileform.visible_fields %}
                  {% if field.name == 'project'  %}
                  {% else %}
                  <div class="form-group mb-3">
                    <label>{{ field.label_tag }}</label>
                    {% render_field field class+="form-control" rows="2" %}
                    {% if field.errors %}
                       <div class="alert alert-danger">
                          {{ field.errors.as_text }}
                      </div>
                    {% endif %}
                  </div>
                  {% endif %}

                {% endfor %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!--  Modal content for the above example -->
<div class="modal fade" id="seed" tabindex="-1" role="dialog" aria-labelledby="assumptions" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel1">Seed I-III</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body text-justify">
                <p>
                    Using the OS is the foundation of our approach. Think of it like a ‘stage gate’ type model for building a disruptive new venture. Unlike Stage-Gate, ventures do not pass sequentially through the OS (with graduations being approved at meetings and so forth).
                    <br>
                    <br>
                    Ventures can move forward and backwards fluidly as our learning improves and our focus needs to change. We can also use a latter stage of the OS (for example, a ‘Solution’ or ‘Business Model’ idea as a means of helping identify and validate a ‘Problem’ – which is an earlier stage).
                </p>
                <ul>
                    <li>
                        <b>SEED I</b>: “PROBLEM” - A venture is seeking to prove the existence, size and acuteness of a consumer problem, and clearly identify the consumer who has it.
                    </li>
                    <li>
                        <b>SEED II</b>: “SOLUTION” - A venture is has validated a user problem, and is now seeking to validate the best solution to solve the problem.
                    </li>
                    <li>
                        <b>SEED III</b>: A venture has validated a problem and solution, and is seeking to validate its business model through which the solution will be commercialized for the consumer.
                    </li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<!--  Modal content for the above example -->
<div class="modal fade" id="bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Problem</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body" id="modal-body">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary submit-form">Save</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--  Modal content for the above example -->
<div class="modal fade" id="bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Problem</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body" id="modal-body">
                <form>
                    <div class="form-group mb-3">
                        <label for="example-textarea">Problem Statement</label>
                        <textarea class="form-control" id="example-textarea" rows="3"></textarea>
                    </div>
                    <div class="form-group mb-3">
                        <label for="example-select">Status</label>
                        <select class="form-control" id="example-select">
                            <option>In Progress</option>
                            <option>Validated</option>
                            <option>Invalidated</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary submit-form">Save</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--  Modal content for the above example -->
<div class="modal fade" id="elevator" tabindex="-1" role="dialog" aria-labelledby="elevator" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Elevator Pitch</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body text-justify" id="modal-body">
                <p>An elevator pitch is a brief, persuasive speech that you use to spark interest in what your organization does. You can also use them to create interest in a project, idea, or product – or in yourself. A good elevator pitch should last no longer than a short elevator ride of 20 to 30 seconds, hence the name.
                <br><br>
                They should be interesting, memorable, and succinct. They also need to explain what makes you – or your organization, product, or idea – unique.</p>
                <p>This is a good structure to follow:</p>
                <ul>
                    <li>We help ____(consumer X)_____ who ___(problem)___ to ___(solution)___ by ___(how it works)___</li>
                    <li>Our product/technology is like the ___(insert analogy of comparative company)___ of/for ___(insert your category)___. For example, our venture is like Uber for Trucking.</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--  Modal content for the above example -->
<div class="modal fade" id="problem" tabindex="-1" role="dialog" aria-labelledby="problem" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Problem</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body text-justify" id="modal-body">
                <p>Ideally your Problem should be a detailed description which encompasses various elements you’ve identified (first as Assumptions, then Hypotheses, then Validated, evidence-backed statements).</p>
                <p>Elements might include:</p>
                <ul>
                    <li>A description of your primary user (age range, sex, demographic information)</li>
                    <li>The underlying needs they’re trying to fulfill</li>
                    <li>Their current behavior or choices</li>
                    <li>Their current tension or frustration (pain points)</li>
                    <li>An identification of what potential pain relievers are for the problem</li>
                    <li>An estimated size of the problem or need (we often refer to this as the ‘Total Addressable Need’, which is where we try and identify how big the market may be to solve this problem).</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--  Modal content for the above example -->
<div class="modal fade" id="solution" tabindex="-1" role="dialog" aria-labelledby="solution" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Solution</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body text-justify" id="modal-body">
                <p>A "Solution" is just another word for a Product or Idea. We frame it as a solution to keep you focused on the user/customer and the problem you’re solving.</p>
                <p>Here is your opportunity to lay out your idea. Describe what it is and how it works in detail. There’s no real right or wrong way to do this stage – but as usual, try to keep it simple and very clear for anyone to understand.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--  Modal content for the above example -->
<div class="modal fade" id="businessmodel" tabindex="-1" role="dialog" aria-labelledby="businessmodel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Business Model</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body text-justify" id="modal-body">
                <p>A business model is a company's plan for how it will generate revenues and make a profit. It explains what products or services the business plans to manufacture and market, and how it plans to do so, including what expenses it will incur.</p>
                <p>To develop it, we use a Business model canvas beacuse it focuses more on how the business actually works. This includes its key channels, resources, customers, partnerships, revenue model and so on.</p>
                <p>Use this link to create your <a href="https://strategyzer.com/canvas/business-model-canvas" target="_blank">business model canvas</a></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--  Modal content for the above example -->
<div class="modal fade" id="delete-modal" tabindex="-1" role="dialog"
  aria-labelledby="deleteLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="deleteLabel">Confirm Delete</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body" id="modal-body">
              Are you sure to delete this element?
              <form>
                <input type="hidden" id="remove-id" value="" />
                <input type="hidden" id="remove-name" value="" />
                {% csrf_token %}
              </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger delete-button">Delete</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div id="leave" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body p-4">
                <div class="text-center">
                    <i class="dripicons-warning h1 text-warning"></i>
                    <h4 class="mt-2">Leave project</h4>
                    <p class="mt-3">Are you sure you want to leave this project? You won't be able to access it anymore.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <button type="submit" id="leave-submit" class="btn btn-warning">Leave</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>


<!--  Modal content for the above example -->
<div class="modal fade" id="invite" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myLargeModalLabel">Invite</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <h5 class="mt-0">Add a team member</h5>
                <p>Type the email adress of the team member you want to add. An invite message will be sent to join your project.</p>
                <div id="invite-form">

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary" id="submit-invite">Send</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
{% endblock %}

{% block js %}
<style>
.remove{cursor:pointer;}
</style>
<script>
$(function() {
    $('.submit', '#comment-form').click(function(){
      if($('textarea[name="text"]','#comment-form').val().trim() == '') {
        return;
      }

      var form = $('#comment-form').serialize();
      $.post('/api/comment', form, function(){
        window.location.reload();
      }).fail(function(xhr, status, error){

      });
    });

    $('.add-file').click(function(){
      $('#file').click();
    });

    $('#file').change(function(){
      $('#file-form').submit();
    });

  $('.call-dynamic-form').click(function(){
    var self = $(this);
    $('#myLargeModalLabel').text(self.attr('data-title'));
    $.get('/api/model/form/' + self.attr('data-name') + '/project/' + $('#project').val(), function(form) {
      $('#modal-body').html(form);
      $('#id_stage').val('seed');
      $('#bs-example-modal-lg').modal('toggle')
    });
  });

  $('.submit-form','#bs-example-modal-lg').click(function(){
    var form = $('form', '#bs-example-modal-lg').serialize();
    var project_id = $('#project').val();
    var id = $('#doc-id').val();
    var form_name = $('#form-name').val();

    var path = form_name + '/project/' + project_id;
    if (id > 0) {
      path += '/id/' + id
    }

    $.post('/api/model/form/' + path, form, function(data) {
      $('#bs-example-modal-lg').modal('toggle')
      window.location.reload();
    }).fail(function(xhr, status, error) {
      $('#modal-body').html(xhr.responseText);
    });
  });

  $('.edit-doc').click(function(){
    var self = $(this);
    $('#myLargeModalLabel').text(self.attr('data-title'));
    $('#bs-example-modal-lg').modal('show');

    var path = self.attr('data-name') + '/project/' + $('#project').val() + '/id/' + self.attr('data-id');

    $.get('/api/model/form/' + path, function(form) {
      $('#modal-body').html(form);
      $('#id_stage').val('seed');
    });
  });

  $('.delete-button').click(function(){
    var name = $('#remove-name').val();
    var id = $('#remove-id').val();
    var path = name + '/project/0/id/' + id;

    var data = $('form', '#delete-modal').serialize();
    $('#delete-modal').modal('hide');

    return $.ajax({
      url: '/api/model/form/' + path,
      type: 'DELETE',
      data: data,
      success: function() {
        window.location.reload();
      },
    });
  });

  $('.remove').click(function(){
    var self = $(this);
    var name = self.attr('data-name');
    var id = self.attr('data-id');
    $('#remove-id').val(id);
    $('#remove-name').val(name);
    $('#delete-modal').modal('show');
  });

  $('.invite').click(function(){
    var self = $(this);
    var id = self.attr('data-id');

    $.get('/api/invite/' + id, function(form) {
      $('#invite-form').html(form);
    });
  });

  $('#submit-invite').click(function(){
    var form = $('form', '#invite-form').serialize();
    var id = $('#project', '#invite-form').val();

    var path = '/api/invite/' + id;

    $.post(path, form, function(data) {
      $('#invite').modal('toggle')
    }).fail(function(xhr, status, error) {
      if (xhr.status != 400) {
        $('#invite').modal('toggle')
        return;
      }
      $('#invite-form').html(xhr.responseText);
    });
  });

  $('#leave-project').click(function(){
    var id = $(this).attr('data-id');
    $('#leave-submit').attr('data-id', id);
  });

  $('#leave-submit').click(function(){
    var id = $(this).attr('data-id');
    var path = '/api/leave/' + id;

    $.post(path, function(data) {
      $('#leave').modal('toggle');
      window.location.pathname = '/';
    });
  });

});
</script>
{% endblock %}
