{% extends 'base.html' %}
{% load staticfiles %}
{% load humanize %}

{% block navigation %}
  {% include 'navigation.html' %}
{% endblock %}

{% block content %}
<!-- MAIN CONTENT
================================================== -->
<div class="main-content">

  {% include 'navbar.html' %}

  <!-- include 'header.html' -->
  
  <!-- CONTENT -->
  <div class="container-fluid mt-5">
    <div class="row">
      <div class="col-12 col-lg-8 col-xl-8">
            
        <!-- Form -->
        <div class="card">
          <div class="card-body">

            <div class="input-group input-group-lg input-group-flush input-group-merge">
              <input data-toggle="modal" data-target="#post" type="text" class="form-control form-control-appended" placeholder="Post to Community...">
              <div class="input-group-append">
                <div class="input-group-text">
                  <span class="fe fe-camera"></span>
                </div>
              </div>
            </div>


            <!--<form id="post-form" action="/post/create" method="post">
              <div class="input-group input-group-lg input-group-flush input-group-merge">
                <input type="text" id="text-post" class="form-control form-control-appended" placeholder="Post to Community...">
                <div class="input-group-append">
                  <div class="input-group-text">
                    <span class="fe fe-camera"></span>
                  </div>
                </div>
              </div>
            </form>-->

          </div>
        </div>

        <div id="post-divider"></div>
        {% include 'home_page.html' %} 
      
      </div>
      <div class="col-12 col-lg-4 col-xl-4 d-none d-lg-block">
        
        
        <!--<div class="card">
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col">
                
                
                <h4 class="card-header-title">
                  Newest Resources
                </h4>

              </div>
              <div class="col-auto">

                
                <a href="{% url 'app:resources' %}" class="small">View all</a>
                
              </div>
            </div>
          </div>
          <div class="card-body">

            {% for resource in resources %}

            {% if resource.title != resources.0.title %}
            <hr>
            {% endif %}

            <div class="row align-items-center">
              <div class="col-auto">
                
                
                {% if resource.file %}
                <a href="#!" class="avatar avatar-lg">
                  <span class="avatar-title rounded bg-white text-secondary">
                    <span class="fe fe-folder"></span>
                  </span>
                </a>
                {% else %}
                <a href="#!" class="avatar avatar-lg">
                  <span class="avatar-title rounded bg-white text-secondary">
                    <span class="fe fe-link"></span>
                  </span>
                </a>
                {% endif %}

              </div>
              <div class="col ml--2">

                
                <h4 class="card-title mb-1">
                  <a href="{{resource.link}}" target="_blank">{{resource.title}}</a>
                </h4>

                
                <p class="card-text small text-muted">
                  <time datetime="2018-05-24">Updated 4hr ago</time>
                </p>
                
              </div>
            </div>
            {% endfor %}

          </div>
        </div>-->

        <!-- Members -->
        <div class="card">
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col">
                
                <!-- Title -->
                <h4 class="card-header-title">
                  Newest Members
                </h4>

              </div>
              <div class="col-auto">

                <!-- Link -->
                <a href="{% url 'app:members' %}" class="small">View all</a>
                
              </div>
            </div> <!-- / .row -->
          </div>
          <div class="card-body">

            {% for member in members %}

              {% if member.username != members.0.username %}
              <hr>
              {% endif %}

              <div class="row align-items-center">
                <div class="col-auto">
                  
                  <!-- Avatar -->
                  <a href="{% url 'app:profile' member.username %}" class="avatar">
                    {% for profile in member.profile_set.all %}
                      {% if profile.image %}
                      <img src="{{profile.image.url}}" alt="..." class="avatar-img rounded-circle">
                      {% endif %}
                    {% endfor %}
                  </a>

                </div>
                <div class="col ml--2">

                  <!-- Title -->
                  <h4 class="card-title mb-1">
                    <a href="{% url 'app:profile' member.username %}">{{member.first_name}} {{member.last_name}}</a>
                  </h4>

                  <!-- Time -->
                  <p class="card-text small text-muted">
                    {% for profile in member.profile_set.all %}
                    {{profile.job_title}} at <a href="{{profile.link}}" target="_blank">{{profile.company}}</a>
                    <br>
                    <small>
                      <i class="fa fa-map-marker-alt text-muted"></i> {{profile.location}}
                    </small>
                    {% endfor %}
                  </p>
                  
                </div>
              </div> <!-- / .row -->

            {% endfor %}

            </div> <!-- / .row -->

          </div> <!-- / .card-body -->
          <div class="card">
            <div class="card-body">
              <small class="text-muted">2018 © VC Platform. </small> 
              <small class="text-muted">Developed by <a href="http://attomik.com/" target="_blank" class="text-muted"><b>Attomik.</b></a></small>
            </div>
          </div>
        </div> <!-- / .card -->
      </div>
    </div> <!-- / .row -->
  </div>

</div> <!-- / .main-content -->

<!-- Modal Edit -->
<div class="modal fade" id="edit1" tabindex="-1" role="dialog" aria-labelledby="editPostLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Edit Post</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea class="form-control"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="edit-post-submit">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Delete Post-->
<div class="modal fade" id="delete1" tabindex="-1" role="dialog" aria-labelledby="deletePostLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-body p-4">
          <div class="text-center">
              <i class="fe fe-alert-triangle h1 text-warning"></i>
              <h4 class="mt-2">Delete Post</h4>
              <p class="mt-3">Are you sure you want to delete this post?</p>
              <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-danger my-2 text-white" id="delete-post-submit" data-dismiss="modal">Delete</button>
          </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Delete Comment -->
<div class="modal fade" id="delete2" tabindex="-1" role="dialog" aria-labelledby="deleteCommentLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-body p-4">
          <div class="text-center">
              <i class="fe fe-alert-triangle h1 text-warning"></i>
              <h4 class="mt-2">Delete Comment</h4>
              <p class="mt-3">Are you sure you want to delete this comment?</p>
              <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-danger my-2 text-white" id="delete-comment-submit" data-dismiss="modal">Delete</button>
          </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="post" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-card card">
        <div class="card-header">
          <div class="row align-items-center">
            <div class="col">

              <!-- Title -->
              <h4 class="card-header-title" id="exampleModalCenterTitle">
                New Message
              </h4>
          
            </div>
            <div class="col-auto">

              <!-- Close -->
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
          
            </div>
          </div> <!-- / .row -->
        </div>
        <form id="post-form" action="/post/create" method="post">
          <div class="card-body">

            <div id="text-post" data-toggle="quill" data-quill-placeholder="Type you message here..."></div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}
{% block js %}
<script src="{% static 'el-pagination/js/el-pagination.js' %}"></script>
<script>
    $.endlessPaginate({
        paginateOnScroll: true,
        paginateOnScrollMargin: 20
    });
</script>
<script type="text/javascript">
  $('img').on("error", function() {
    $(this).attr('src', '{% static 'assets/img/logo-square.png' %}');
  });
</script>
{% endblock %}