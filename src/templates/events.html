{% extends 'base.html' %}
{% load staticfiles %}

{% block navigation %}
  {% include 'navigation.html' %}
{% endblock %}

{% block content %}
<!-- MAIN CONTENT
================================================== -->
<div class="main-content">
  
  {% include 'navbar.html' %}

  <!-- CONTENT -->
  <div class="container-fluid mt-5 mb-5">
    <div class="row">
      <div class="col-12">
        
        <!-- Files -->
        <div class="card" data-toggle="lists" data-lists-values='["name"]'>
          <div class="card-header">
            <div class="row align-items-center">
              <div class="col">
                
                <!-- Title -->
                <h4 class="card-header-title">
                  Events
                </h4>

              </div>
              <div class="col-auto">
                
                <!-- Dropdown -->
                <div class="dropdown">

                  <!-- Toggle -->
                  <a href="#!" class="small text-muted dropdown-toggle" data-toggle="dropdown">
                    Sort order
                  </a>

                  <!-- Menu -->
                  <div class="dropdown-menu">
                    <a class="dropdown-item sort" data-sort="name" href="#!">
                      Asc
                    </a>
                    <a class="dropdown-item sort" data-sort="name" href="#!">
                      Desc
                    </a>
                  </div>

                </div>

              </div>
              <div class="col-auto">
                    
                <!-- Button -->
                <a href="{% url 'app:events-create' %}" class="btn btn-sm btn-primary">
                  Post Event
                </a>

              </div>
            </div> <!-- / .row -->
          </div>
          <div class="card-header">
            <div class="row">
              <div class="col-12">
                
                <!-- Form -->
                <form>
                  <div class="input-group input-group-flush input-group-merge">
                    <input type="search" class="form-control form-control-prepended search" placeholder="Search">
                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <span class="fe fe-search"></span>
                      </div>
                    </div>
                  </div>
                </form>

              </div>
            </div> <!-- / .row -->
          </div>
          <div class="card-body">

            <!-- List -->
            <ul class="list-group list-group-lg list-group-flush list my--4">

              {% for event in events %}
              <li class="list-group-item px-0">
                
                <div class="row align-items-center">
                  <div class="col-auto">
                    
                    <!-- Avatar -->
                    {% if event.image %}
                    <a href="#!" class="avatar avatar-xl">
                      <img src="{{event.image.url}}" alt="..." class="avatar-img rounded">
                    </a>
                    {% endif %}

                  </div>
                  <div class="col ml--2">

                    <!-- Title -->
                    <h4 class="card-title mb-1 name">
                      {{event.title}} <small class="text-muted ">Posted by {{event.user.first_name}} {{event.user.last_name}} on <time>Jan 3, 2018</time></small>
                    </h4>
                    <!-- Text -->
                    <small>
                      <i class="fa fa-calendar-alt text-muted"></i> <span class="text-muted">{{event.datetime}}</span>
                    </small>
                    <br>
                    <small>
                      <i class="fa fa-map-marked-alt text-muted"></i> <span class="text-muted">{{event.location}}</span>
                    </small>
                    
                  </div>
                  <div class="col-auto">
                    
                    <!-- Avatar group -->
                    <div class="avatar-group">
                      <a href="profile-posts.html" class="avatar avatar-xs" data-toggle="tooltip" title="" data-original-title="Ab Hadley">
                        <img src="{% static 'assets/img/avatars/profiles/avatar-2.jpg' %}" class="avatar-img rounded-circle" alt="...">
                      </a>
                      <a href="profile-posts.html" class="avatar avatar-xs" data-toggle="tooltip" title="" data-original-title="Adolfo Hess">
                        <img src="{% static 'assets/img/avatars/profiles/avatar-3.jpg' %}" class="avatar-img rounded-circle" alt="...">
                      </a>
                      <a href="profile-posts.html" class="avatar avatar-xs" data-toggle="tooltip" title="" data-original-title="Daniela Dewitt">
                        <img src="{% static 'assets/img/avatars/profiles/avatar-4.jpg' %}" class="avatar-img rounded-circle" alt="...">
                      </a>
                      <a href="profile-posts.html" class="avatar avatar-xs" data-toggle="tooltip" title="" data-original-title="Miyah Myles">
                        <img src="{% static 'assets/img/avatars/profiles/avatar-5.jpg' %}" class="avatar-img rounded-circle" alt="...">
                      </a>
                      <div class="avatar avatar-xs">
                        <div class="avatar-title rounded-circle">+7</div>
                      </div>
                    </div>

                  </div>
                  <div class="col-auto">
                    
                
                    <a href="{{resource.file}}" class="btn btn-sm btn-white d-none d-md-inline-block">
                      Attending
                    </a>

                  </div>
                  <div class="col-auto">
                    
                    <!-- Dropdown -->
                    <div class="dropdown">
                      <a href="#!" class="dropdown-ellipses dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fe fe-more-vertical"></i>
                      </a>
                      <div class="dropdown-menu dropdown-menu-right">
                        <a href="{% url 'app:events-update' event.id %}" class="dropdown-item">
                          Edit
                        </a>
                        <a href="#!" class="dropdown-item delete-event" data-toggle="modal" data-target="#delete4" data-id="{{ event.id }}">
                          Delete
                        </a>
                      </div>
                    </div>

                  </div>
                </div> <!-- / .row -->

              </li>

              {% endfor %}
            </ul>

          </div>
        </div>

      </div>
    </div> <!-- / .row -->
  </div>
  
</div> <!-- / .main-content -->
<!-- Modal Delete Event -->
<div class="modal fade" id="delete4" tabindex="-1" role="dialog" aria-labelledby="deleteCommentLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-body p-4">
          <div class="text-center">
              <i class="fe fe-alert-triangle h1 text-warning"></i>
              <h4 class="mt-2">Delete Event</h4>
              <p class="mt-3">Are you sure you want to delete this event?</p>
              <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-danger my-2 text-white" id="delete-event-submit" data-dismiss="modal">Delete</button>
          </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}